<!-- Mensajes de estado -->
@if (loading) {
  <div class="text-yellow-300 flex items-center gap-2 mb-4">
    <i class="fas fa-spinner fa-spin"></i> Cargando estudiantes...
  </div>
}

@if (errorMessage) {
  <div class="text-red-500 flex items-center gap-2 mb-4">
    <i class="fas fa-exclamation-circle"></i> {{ errorMessage }}
  </div>
}

@if (!loading && filteredEstudiantes.length === 0) {
  <div class="text-blue-300 flex items-center gap-2 mb-4">
    <i class="fas fa-info-circle"></i> No se encontraron estudiantes registrados
  </div>
}

<!-- Tabla -->
@if (!loading && filteredEstudiantes.length > 0) {
  <div class="overflow-x-auto">
    <table class="min-w-full bg-white text-black rounded shadow-md">
      <thead class="bg-blue-600 text-white">
        <tr>
          <th class="py-3 px-4 text-left">#</th>
          <th class="py-3 px-4 text-left">Nombres</th>
          <th class="py-3 px-4 text-left">Apellidos</th>
          <th class="py-3 px-4 text-left">Usuario</th>
          <th class="py-3 px-4 text-left">Email</th>
          <th class="py-3 px-4 text-left">Fecha Ingreso</th>
          <th class="py-3 px-4 text-left">Fecha Nacimiento</th>
          <th class="py-3 px-4 text-left">Estado</th>
          <th class="py-3 px-4 text-left">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let estudiante of filteredEstudiantes; let i = index" class="hover:bg-gray-100">
          <td class="py-2 px-4">{{ i + 1 }}</td>
          <td class="py-2 px-4">{{ estudiante.nombre }}</td>
          <td class="py-2 px-4">{{ estudiante.apellido }}</td>
          <td class="py-2 px-4">{{ estudiante.usuario }}</td>
          <td class="py-2 px-4">{{ estudiante.email }}</td>
          <td class="py-2 px-4">{{ estudiante.fechaIngreso | date:'dd/MM/yyyy' }}</td>
          <td class="py-2 px-4">{{ estudiante.fechaNacimiento | date:'dd/MM/yyyy' }}</td>
          <td class="py-2 px-4">
            <span [ngClass]="estudiante.activo ? 'text-green-600 font-semibold' : 'text-red-600 font-semibold'">
              {{ estudiante.activo ? 'ACTIVO' : 'INACTIVO' }}
            </span>
          </td>
          <td class="py-2 px-4 flex gap-2">
            <button [routerLink]="['/app-editar-estudiante', estudiante.usuario]"
                    class="px-3 py-1 bg-yellow-400 text-black rounded hover:bg-yellow-500">
              <i class="fas fa-edit"></i> Editar
            </button>
            <button (click)="cambiarEstado(estudiante.usuario, !estudiante.activo)"
                    [ngClass]="estudiante.activo ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600'"
                    class="px-3 py-1 text-white rounded">
              <i [ngClass]="estudiante.activo ? 'fas fa-toggle-off' : 'fas fa-toggle-on'"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
}
